<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Violet Rhodes Chat</title>
  <style>
    body{margin:0}#violet-chat-bubble{position:fixed;bottom:20px;right:20px;width:60px;height:60px;background:linear-gradient(135deg,#c471f5,#f7797d);border-radius:50%;display:flex;justify-content:center;align-items:center;color:white;font-size:28px;cursor:pointer;z-index:1000}
    #violet-chat-window{position:fixed;bottom:100px;right:20px;width:330px;height:450px;background:#1a1a2e;border-radius:12px;overflow:hidden;display:flex;flex-direction:column;z-index:1001;box-shadow:0 5px 40px rgba(0,0,0,0.3)}
    .hidden{display:none}.violet-header{background:linear-gradient(135deg,#c471f5,#f7797d);color:white;padding:12px;display:flex;justify-content:space-between;align-items:center}
    #violet-close{background:none;border:none;color:white;font-size:24px;cursor:pointer}#violet-messages{flex:1;padding:10px;overflow-y:auto;color:white}
    .violet-msg{padding:8px 10px;border-radius:10px;margin-bottom:8px;word-wrap:break-word}.user{background:#3a3aa6;margin-left:auto;max-width:80%}.violet{background:#2a2a3d;margin-right:auto;max-width:80%}
    .violet-input{display:flex;padding:10px;background:#0f0f1c;gap:8px}#violet-input-box{flex:1;padding:8px;background:#222234;color:white;border-radius:10px;border:1px solid #444;outline:none}
    #violet-send{padding:8px 12px;border:none;border-radius:10px;cursor:pointer;background:linear-gradient(135deg,#c471f5,#f7797d);color:white;font-weight:bold}
  </style>
</head>
<body>
<div id="violet-chat-bubble">ðŸ’¬</div>
<div id="violet-chat-window" class="hidden">
  <div class="violet-header"><span>Violet Rhodes</span><button id="violet-close">&times;</button></div>
  <div id="violet-messages"></div>
  <div class="violet-input"><input id="violet-input-box" placeholder="talk to me babeâ€¦" /><button id="violet-send">Send</button></div>
</div>
<audio id="violet-voice"></audio>
<script>
const BACKEND_URL='https://violet-rhodes-backend.onrender.com';
const bubble=document.getElementById('violet-chat-bubble'),chat=document.getElementById('violet-chat-window'),close=document.getElementById('violet-close'),messages=document.getElementById('violet-messages'),input=document.getElementById('violet-input-box'),send=document.getElementById('violet-send'),audioPlayer=document.getElementById('violet-voice');
let conversation=[];
bubble.onclick=()=>chat.classList.remove('hidden');
close.onclick=()=>chat.classList.add('hidden');
send.onclick=sendMessage;
input.addEventListener('keydown',e=>{if(e.key==='Enter')sendMessage()});
function addMessage(sender,text){const div=document.createElement('div');div.className=`violet-msg ${sender}`;div.textContent=text;messages.appendChild(div);messages.scrollTop=messages.scrollHeight}
async function sendMessage(){const text=input.value.trim();if(!text)return;addMessage('user',text);conversation.push({role:'user',content:text});input.value='';
try{const res=await fetch(BACKEND_URL+'/api/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({messages:conversation})});const data=await res.json();addMessage('violet',data.reply);conversation.push({role:'assistant',content:data.reply});if(data.audio){audioPlayer.src=BACKEND_URL+data.audio;audioPlayer.play()}}catch(err){addMessage('violet','oops! connection issue')}}
</script>
</body>
</html>
